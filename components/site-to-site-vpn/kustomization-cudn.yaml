---
# Kustomization for CUDN-based Site-to-Site VPN
# This is separate from the existing strongSwan-based VPN

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: site-to-site-vpn-cudn
  annotations:
    description: "ClusterUserDefinedNetwork configuration for VM-to-VPC connectivity"

resources:
  # Namespace for VPN infrastructure
  - vpn-infra-namespace.yaml
  
  # CUDN and network attachment
  - cudn-vm-network.yaml
  
  # VM cloud-init configuration
  - ipsec-vm-cloud-init.yaml
  
  # IPSec gateway VMs (optional - can be deployed separately)
  # - ipsec-vm-example.yaml

# Labels to apply to all resources
commonLabels:
  app.kubernetes.io/part-of: site-to-site-vpn-cudn
  app.kubernetes.io/managed-by: kustomize
  component: vpn-infrastructure

namespace: vpn-infra
